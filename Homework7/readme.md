# Лабораторная работа. Развертывание коммутируемой сети с резервными каналами
## Топология

![topology](https://github.com/EfremovaOD/Otus_Homeworks/blob/2d77218e6e3a00dc0b4a888e897a9c2e3183eaeb/photo/homework6/Topology.png)

## Таблица адресации 

| Устройство  | Интерфейс  | IP-адрес | Маска подсети |
| :------------ |:---------------:| -----:| -----:|
| S1      | VLAN 1   | 192.168.1.1  | 255.255.255.0 |
| S2      | VLAN 1   | 192.168.1.2  | 255.255.255.0 |
| S3      | VLAN 1   | 192.168.1.3  | 255.255.255.0 |


## Задачи:

### Часть 1. Создание сети и настройка основных параметров устройства.

### Часть 2. Выбор корневого моста.

### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов.

### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов.


### Часть 1. Создание сети и настройка основных параметров устройства.

#### Шаг 1. Создаем сеть согласно топологии.

#### Шаг 2.	Выполняем инициализацию и перезагрузку коммутаторов.

#### Шаг 3.	Настройте базовые параметры каждого коммутатора:

  1. На примере S1:

    Switch>en
    Switch#conf t
    Switch(config)#no ip domain-lookup
    Switch(config)#hostname S1
    S1(config)#enable secret class
    S1(config)#line console 0
    S1(config-line)#password cisco
    S1(config-line)#login
    S1(config-line)#logging syn
    S1(config-line)#line vty 0 4
    S1(config-line)#password cisco
    S1(config-line)#login
    S1(config-line)#exit
    S1(config)#service pass
    S1(config)#banner motd #UNAUTORIZED ACCESS PROHIBITED#
    S1(config)#int vlan 1
    S1(config-if)#ip add 192.168.1.1 255.255.255.0
    S1(config-if)#no shutdown
    S1(config-if)#
    S1(config-if)#copy running-config startup-config

#### Шаг 4.	Проверьте связь.

  1. Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S2?

![PinG_S1_to_S2](https://github.com/EfremovaOD/Otus_Homeworks/blob/ecabb1c2b1da0951a182e86d98d8742a05761dab/photo/Homework7/Ping_S1_S2.PNG)
     
  2. Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S3?

![PinG_S1_to_S3](https://github.com/EfremovaOD/Otus_Homeworks/blob/ecabb1c2b1da0951a182e86d98d8742a05761dab/photo/Homework7/Ping_S1_S3.PNG)
     
  3. Успешно ли выполняется эхо-запрос от коммутатора S2 на коммутатор S3? -

![PinG_S2_to_S3](https://github.com/EfremovaOD/Otus_Homeworks/blob/ecabb1c2b1da0951a182e86d98d8742a05761dab/photo/Homework7/Ping_S2_S3.PNG)

### Часть 2. Определение корневого моста.

#### Шаг 1. Отключите все порты на коммутаторах:

    S1(config-if)#int ra f0/1-24, g0/1-2
    S1(config-if-range)#shutdown

#### Шаг 2.	Настройте подключенные порты в качестве транковых:

    S1(config-if-range)#int range f0/1-4
    S1(config-if-range)#switch mode trunk

#### Шаг 3.	Включите порты F0/2 и F0/4 на всех коммутаторах:

    S1(config-if-range)#int range f0/2, f0/4
    S1(config-if-range)#no shutdown

#### Шаг 4.	Отобразите данные протокола spanning-tree:


  1. S1:



  2. S2:



  3. S3:



 ### С учетом выходных данных, поступающих с коммутаторов, ответьте на следующие вопросы:
  
  a. Какой коммутатор является корневым мостом? -  S3

  b. Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста? - S3 имеет наименьший MAC

  c. Какие порты на коммутаторе являются корневыми портами? - на  S1 и S2:  f0/4, S3 - корневой и не  имеет корневых портов.

  d. Какие порты на коммутаторе являются назначенными портами? - S3 - корневой  и все его порты являются  назначенными, S2 имет назначенный  порт: f0/2.

  i. Какой порт отображается в качестве альтернативного и в настоящее время заблокирован? - S2: f0/2

  f. Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта? - Маршрут считается неэффективным из-за его длинны. Будет использоваться как резервный в случае отказа корневого порта.


### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов.


#### Шаг 1. Определите коммутатор с заблокированным портом:



#### Шаг 2.	Измените стоимость порта:

    S2(config-if)#int f0/4
    S2(config-if)#spanning-tree vlan 1 cost 18

#### Шаг 3.	Просмотрите изменения протокола spanning-tree:

  1. S1:



  2. S2:



#### Шаг 4.	Удалите изменения стоимости порта:

    S2(config-if)#int f0/4
    S2(config-if)#no spanning-tree vlan 1 cost 18

##### Повторно выполните команду show spanning-tree, чтобы подтвердить, что протокол STP сбросил порт на коммутаторе некорневого моста, вернув исходные настройки порта. Протоколу STP требуется примерно 30 секунд, чтобы завершить процесс перевода порта:


### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов.

  1. Включите порты F0/1 и F0/3 на всех коммутаторах:

    S1(config)#int ra f0/1, f0/3
    S1(config-if-range)#no shutdown

  2. Подождите 30 секунд, чтобы протокол STP завершил процесс перевода порта, после чего выполните команду show spanning-tree на коммутаторах некорневого моста:

     2.1. S1:



     2.2. S2:











